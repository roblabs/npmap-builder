/*
 Fabien Doiron 2013
 @license MIT <http://opensource.org/licenses/mit-license.php>
 @link http://fabien-d.github.com/alertify.js/
 @module alertify
 @version 0.3.11
*/
(function(n,l){var h=n.document,k;k=function(){var e={},k=!1,r=[],g,p,q,t,u,v,w,f,m,x;x=function(){var a,b,c=!1,d=h.createElement("fakeelement"),f={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(a in f)if(d.style[a]!==l){b=f[a];c=!0;break}return{type:b,supported:c}};g=function(a){return h.getElementById(a)};e={labels:{ok:"OK",cancel:"Cancel"},delay:5E3,buttonReverse:!1,buttonFocus:"ok",transition:l,addListeners:function(a){var b="undefined"!==typeof q,c="undefined"!==typeof p,d="undefined"!==typeof m,f="",e=this,s,g,k,n,l;s=function(b){"undefined"!==typeof b.preventDefault&&b.preventDefault();k(b);"undefined"!==typeof m&&(f=m.value);"function"===typeof a&&("undefined"!==typeof m?a(!0,f):a(!0));return!1};g=function(b){"undefined"!==typeof b.preventDefault&&b.preventDefault();k(b);"function"===typeof a&&a(!1);return!1};k=function(a){e.hide();e.unbind(h.body,"keyup",n);e.unbind(t,"focus",l);b&&e.unbind(q,"click",s);c&&e.unbind(p,"click",g)};n=function(a){var b=a.keyCode;(32===b&&!d||d&&13===b)&&s(a);27===b&&c&&g(a)};l=function(a){d?m.focus():!c||e.buttonReverse?q.focus():p.focus()};this.bind(t,"focus",l);this.bind(u,"focus",l);b&&this.bind(q,"click",s);c&&this.bind(p,"click",g);this.bind(h.body,"keyup",n);this.transition.supported||this.setFocus()},bind:function(a,b,c){"function"===typeof a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},handleErrors:function(){if("undefined"!==typeof n.onerror){var a=this;n.onerror=function(b,c,d){a.error("["+b+" on line "+d+" of "+c+"]",0)};return!0}return!1},appendButtons:function(a,b){return this.buttonReverse?b+a:a+b},build:function(a){var b=a.type,c=a.message;a='<div class="alertify-dialog"><a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>';"none"===e.buttonFocus&&(a+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>');"prompt"===b&&(a+='<div id="alertify-form">');a+='<article class="alertify-inner">';a+='<p class="alertify-message">{{message}}</p>'.replace("{{message}}",c);"prompt"===b&&(a+='<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>');a+='<nav class="alertify-buttons">{{buttons}}</nav>';a+="</article>";"prompt"===b&&(a+="</div>");a+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>';a+="</div>";switch(b){case "confirm":a=a.replace("{{buttons}}",this.appendButtons('<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>','<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>'));a=a.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case "prompt":a=a.replace("{{buttons}}",this.appendButtons('<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>','<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>'));a=a.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case "alert":a=a.replace("{{buttons}}",'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>'),a=a.replace("{{ok}}",this.labels.ok)}return a},close:function(a,b){var c=b&&!isNaN(b)?+b:this.delay,d=this,e,g;this.bind(a,"click",function(){e(a)});g=function(a){a.stopPropagation();d.unbind(this,d.transition.type,g);f.removeChild(this);f.hasChildNodes()||(f.className+=" alertify-logs-hidden")};e=function(a){"undefined"!==typeof a&&a.parentNode===f&&(d.transition.supported?(d.bind(a,d.transition.type,g),a.className+=" alertify-log-hide"):(f.removeChild(a),f.hasChildNodes()||(f.className+=" alertify-logs-hidden")))};0!==b&&setTimeout(function(){e(a)},c)},dialog:function(a,b,c,d,e){w=h.activeElement;var f=function(){f()};if("string"!==typeof a)throw Error("message must be a string");if("string"!==typeof b)throw Error("type must be a string");if("undefined"!==typeof c&&"function"!==typeof c)throw Error("fn must be a function");this.init();f();r.push({type:b,message:a,callback:c,placeholder:d,cssClass:e});k||this.setup();return this},extend:function(a){if("string"!==typeof a)throw Error("extend method must have exactly one paramter");return function(b,c){this.log(b,a,c);return this}},hide:function(){var a,b=this;r.splice(0,1);0<r.length?this.setup(!0):(k=!1,a=function(c){c.stopPropagation();b.unbind(void 0,b.transition.type,a)},this.transition.supported&&this.bind(void 0,this.transition.type,a),w.focus())},init:function(){h.createElement("nav");h.createElement("article");h.createElement("section");null==g("alertify-logs")&&(f=h.createElement("div"),f.setAttribute("id","alertify-logs"),f.className="alertify-logs alertify-logs-hidden",h.body.appendChild(f));h.body.setAttribute("tabindex","0");this.transition=x()},log:function(a,b,c){var d=function(){f&&null!==f.scrollTop||d()};this.init();d();f.className="alertify-logs";this.notify(a,b,c);return this},notify:function(a,b,c){var d=h.createElement("article");d.className="alertify-log"+("string"===typeof b&&""!==b?" alertify-log-"+b:"");d.innerHTML=a;f.appendChild(d);setTimeout(function(){d.className+=" alertify-log-show"},50);this.close(d,c)},set:function(a){var b;if("object"!==typeof a&&a instanceof Array)throw Error("args must be an object");for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},setFocus:function(){m?(m.focus(),m.select()):v.focus()},setup:function(a){var b=r[0],c=this,d;k=!0;d=function(a){a.stopPropagation();c.setFocus();c.unbind(void 0,c.transition.type,d)};this.transition.supported&&!a&&this.bind(void 0,this.transition.type,d);(void 0).innerHTML=this.build(b);t=g("alertify-resetFocus");u=g("alertify-resetFocusBack");q=g("alertify-ok")||l;p=g("alertify-cancel")||l;v="cancel"===e.buttonFocus?p:"none"===e.buttonFocus?g("alertify-noneFocus"):q;m=g("alertify-text")||l;g("alertify-form");"string"===typeof b.placeholder&&""!==b.placeholder&&(m.value=b.placeholder);a&&this.setFocus();this.addListeners(b.callback)},unbind:function(a,b,c){"function"===typeof a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}};return{alert:function(a,b,c){e.dialog(a,"alert",b,"",c);return this},confirm:function(a,b,c){e.dialog(a,"confirm",b,"",c);return this},extend:e.extend,init:e.init,log:function(a,b,c){e.log(a,b,c);return this},prompt:function(a,b,c,d){e.dialog(a,"prompt",b,c,d);return this},success:function(a,b){e.log(a,"success",b);return this},error:function(a,b){e.log(a,"error",b);return this},set:function(a){e.set(a)},labels:e.labels,debug:e.handleErrors}};"function"===typeof define?define([],function(){return new k}):"undefined"===typeof n.alertify&&(n.alertify=new k)})(this);